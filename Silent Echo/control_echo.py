'''
  This code is to control the code "silent_echo.py" from which an API is created that controls the execution of silent echo.
  
  In this code, accessing http://<your_ip_address>:5000/start in a web browser or
    other HTTP request tool will start the execution of the script your_script.py, 
    and accessing http://<your_ip_address>:5000/stop will stop the execution of the script.

    Using 'pip install flask' and 'pip install signal' and' pip install subprocess' for execute this code
'''
from flask import Flask
import subprocess
import signal
import os

app = Flask(__name__)

process = None

@app.route('/start')
def start_script():
    global process
    process = subprocess.Popen(['python', 'silent_echo.py'])
    return "Script started"

@app.route('/stop')
def stop_script():
    global process
    if process:
        os.kill(process.pid, signal.SIGTERM)
        process = None
        return "Script stoped"
    else:
        return "Nenhum script em execução"

if __name__ == '__main__':
    app.run(host='0.0.0.0', port=5000)
